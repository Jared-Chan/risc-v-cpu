# RISC-V CPU on the DE1-SoC

## Intel FPGA IP

This project uses the PLL Intel FPGA IP and RAM: 2-PORT generated by Quartus.

The RAM is configured to have 16,384 32-bit words and has registered inputs and outputs. It runs at 2X the frequency of the CPU so that the output is available after one clock cycle.

The PLL outputs three clocks: 10 MHz for the CPU, 20 MHz for the RAM, and 50 MHz for the multiplier.


## Memory initialization files

This repository provides the following memory initialization files, created using `src/create_mif`: 

* `coremark.mif`
* `coremark_zmmul.mif`
* `shell.mif`
* `helloworld.mif`
* `rtos_example.mif`


## Configuration

In `de1-soc/config.svh`, defining
* `ZMMUL` enables the multiplier
    * this must be defined to run `coremark_zmmul.mif` and `rtos_example.mif`
* `PRIV` enables machine timer interrupts and exceptions
    * this must be defined to run `rtos_example.mif`

## Performance

| Configuration | Max CPU Clock Freq | Max Multiplier Clock Freq | Max RAM Clock Freq | CPU ALMs |
| ------------- | ------------- | ------------- | ------------- | ------------- |
| RV32I | ~50 MHz | n.a. | ~300 MHz | ~2500 |
| RV32I + Zmmul | ~65 MHz | ~190 MHz | ~300 MHz | ~2700 |
| RV32I + Zmmul + Interrupts | ~55 MHz | ~190 MHz | ~300 MHz | ~3800 |

Max clock frequencies are estimated by the Timing Analyzer in Quartus. The Restricted Fmax of the Slow 1100mV 85C Model is reported here.

